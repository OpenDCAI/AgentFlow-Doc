import{_ as n,c as a,a as e,o as i}from"./app-BSBZkIGC.js";const l={};function d(t,s){return i(),a("div",null,[...s[0]||(s[0]=[e(`<p>This article provides a detailed tool registration decision guide.</p><h2 id="decision-tree" tabindex="-1"><a class="header-anchor" href="#decision-tree"><span>Decision Tree</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>                     Start: I need to develop a new tool</span></span>
<span class="line"><span>                                  │</span></span>
<span class="line"><span>                                  ▼</span></span>
<span class="line"><span>               ┌─────────────────────────────────────┐</span></span>
<span class="line"><span>               │ Q1: Need persistent connections or   │</span></span>
<span class="line"><span>               │     long-lived state?                │</span></span>
<span class="line"><span>               │                                     │</span></span>
<span class="line"><span>               │ - TCP/WebSocket connections          │</span></span>
<span class="line"><span>               │ - Process handles                    │</span></span>
<span class="line"><span>               │ - VM/Container instances             │</span></span>
<span class="line"><span>               │ - Database connection pools          │</span></span>
<span class="line"><span>               │ - Browser Sessions                   │</span></span>
<span class="line"><span>               └─────────────────────────────────────┘</span></span>
<span class="line"><span>                         │              │</span></span>
<span class="line"><span>                        Yes             No</span></span>
<span class="line"><span>                         │              │</span></span>
<span class="line"><span>                         ▼              ▼</span></span>
<span class="line"><span>              ┌──────────────┐  ┌─────────────────────────┐</span></span>
<span class="line"><span>              │ Backend class │  │ Q2: Need to preload      │</span></span>
<span class="line"><span>              │              │  │     resources?            │</span></span>
<span class="line"><span>              │ Continue...  │  │                           │</span></span>
<span class="line"><span>              └──────────────┘  │ - ML models               │</span></span>
<span class="line"><span>                         │      │ - Vector indices           │</span></span>
<span class="line"><span>                         │      │ - Large config files       │</span></span>
<span class="line"><span>                         │      └─────────────────────────┘</span></span>
<span class="line"><span>                         │               │           │</span></span>
<span class="line"><span>                         │              Yes          No</span></span>
<span class="line"><span>                         │               │           │</span></span>
<span class="line"><span>                         │               ▼           ▼</span></span>
<span class="line"><span>                         │    ┌──────────────┐  ┌──────────────────┐</span></span>
<span class="line"><span>                         │    │ Backend class │  │ @register_api_tool │</span></span>
<span class="line"><span>                         │    │ (Shared       │  │ (Lightweight tool) │</span></span>
<span class="line"><span>                         │    │  resource)    │  │                    │</span></span>
<span class="line"><span>                         │    └──────────────┘  └──────────────────┘</span></span>
<span class="line"><span>                         │</span></span>
<span class="line"><span>                         ▼</span></span>
<span class="line"><span>              ┌───────────────────────────────────┐</span></span>
<span class="line"><span>              │ Q3: Are resources globally shared   │</span></span>
<span class="line"><span>              │     or user-independent?            │</span></span>
<span class="line"><span>              └───────────────────────────────────┘</span></span>
<span class="line"><span>                         │              │</span></span>
<span class="line"><span>                    Globally       User-independent</span></span>
<span class="line"><span>                     shared</span></span>
<span class="line"><span>                         │              │</span></span>
<span class="line"><span>                         ▼              ▼</span></span>
<span class="line"><span>              ┌─────────────────┐  ┌─────────────────┐</span></span>
<span class="line"><span>              │ Implement        │  │ Implement        │</span></span>
<span class="line"><span>              │ warmup()         │  │ initialize()     │</span></span>
<span class="line"><span>              │ shutdown()       │  │ cleanup()        │</span></span>
<span class="line"><span>              │                 │  │                 │</span></span>
<span class="line"><span>              │ e.g., RAG, Model│  │ e.g., VM, Bash  │</span></span>
<span class="line"><span>              └─────────────────┘  └─────────────────┘</span></span>
<span class="line"><span>                         │              │</span></span>
<span class="line"><span>                         └──────┬───────┘</span></span>
<span class="line"><span>                                ▼</span></span>
<span class="line"><span>               ┌─────────────────────────────────────┐</span></span>
<span class="line"><span>               │ Q4: Need both types of resources?     │</span></span>
<span class="line"><span>               │                                     │</span></span>
<span class="line"><span>               │ e.g., Browser (shared process +      │</span></span>
<span class="line"><span>               │       independent pages)             │</span></span>
<span class="line"><span>               └─────────────────────────────────────┘</span></span>
<span class="line"><span>                         │              │</span></span>
<span class="line"><span>                        Yes             No</span></span>
<span class="line"><span>                         │              │</span></span>
<span class="line"><span>                         ▼              ▼</span></span>
<span class="line"><span>              ┌─────────────────┐  ┌─────────────────┐</span></span>
<span class="line"><span>              │ Hybrid Backend  │  │ Done!           │</span></span>
<span class="line"><span>              │ Implement all   │  │                 │</span></span>
<span class="line"><span>              │ four methods    │  │                 │</span></span>
<span class="line"><span>              └─────────────────┘  └─────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="edge-case-guide" tabindex="-1"><a class="header-anchor" href="#edge-case-guide"><span>Edge Case Guide</span></a></h2><table><thead><tr><th>Scenario</th><th>Recommended Choice</th><th>Reason</th></tr></thead><tbody><tr><td>Complex API Client with authentication</td><td>APITool</td><td>Authentication is stateless</td></tr><tr><td>API Client with connection pool</td><td>Backend (warmup)</td><td>Connection pool needs lifecycle management</td></tr><tr><td>API requiring Session Cookies</td><td>Backend (initialize)</td><td>Session state maintained across requests</td></tr><tr><td>Simple HTTP API call</td><td>APITool</td><td>Request-response pattern</td></tr><tr><td>API requiring retry logic</td><td>APITool</td><td>Retry is a stateless operation</td></tr><tr><td>API requiring rate limiting/circuit breaking</td><td>Backend (warmup)</td><td>Rate limiter needs global state</td></tr></tbody></table><h2 id="implementation-comparison-table" tabindex="-1"><a class="header-anchor" href="#implementation-comparison-table"><span>Implementation Comparison Table</span></a></h2><table><thead><tr><th>Type</th><th>Base Class</th><th>Session</th><th>Lifecycle Methods</th><th>Tool Naming</th><th>Example</th></tr></thead><tbody><tr><td>Lightweight API Tool</td><td>None</td><td>❌</td><td>None</td><td><code>action</code></td><td>WebSearch</td></tr><tr><td>Shared Resource Backend</td><td><code>Backend</code></td><td>❌</td><td><code>warmup()</code>, <code>shutdown()</code></td><td><code>resource:action</code></td><td>RAG</td></tr><tr><td>Session Resource Backend</td><td><code>Backend</code></td><td>✅</td><td><code>initialize()</code>, <code>cleanup()</code></td><td><code>resource:action</code></td><td>VM</td></tr><tr><td>Hybrid Backend</td><td><code>Backend</code></td><td>✅</td><td>All four</td><td><code>resource:action</code></td><td>Browser</td></tr></tbody></table><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq"><span>FAQ</span></a></h2><h3 id="q-when-to-use-apitool" tabindex="-1"><a class="header-anchor" href="#q-when-to-use-apitool"><span>Q: When to use APITool?</span></a></h3><p>When your tool:</p><ul><li>Calls external HTTP APIs</li><li>Does not need to maintain state</li><li>Does not need to preload resources</li><li>Each call is independent of others</li></ul><h3 id="q-when-to-use-backend" tabindex="-1"><a class="header-anchor" href="#q-when-to-use-backend"><span>Q: When to use Backend?</span></a></h3><p>When your tool:</p><ul><li>Needs to preload models or resources</li><li>Needs to maintain persistent connections</li><li>Needs to allocate independent resources for each user</li><li>Needs to manage resource lifecycles</li></ul><h3 id="q-when-to-implement-warmup" tabindex="-1"><a class="header-anchor" href="#q-when-to-implement-warmup"><span>Q: When to implement warmup()?</span></a></h3><p>When you need to:</p><ul><li>Load ML models</li><li>Establish connection pools</li><li>Initialize global caches</li><li>Start background processes</li></ul><h3 id="q-when-to-implement-initialize" tabindex="-1"><a class="header-anchor" href="#q-when-to-implement-initialize"><span>Q: When to implement initialize()?</span></a></h3><p>When you need to:</p><ul><li>Allocate independent resources for each user</li><li>Maintain user-level state</li><li>Isolate operations between users</li></ul><h2 id="ci-cd-validation" tabindex="-1"><a class="header-anchor" href="#ci-cd-validation"><span>CI/CD Validation</span></a></h2><p>It is recommended to validate configuration in CI/CD:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">python</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sandbox</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> validate</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configs/profiles/production.json</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --strict</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Validation checks:</p><table><thead><tr><th>Check Item</th><th>Description</th></tr></thead><tbody><tr><td><code>backend_class</code> path</td><td>Verify class path is importable</td></tr><tr><td>@tool decorator</td><td>Verify tool methods exist</td></tr><tr><td>API tool registration</td><td>Verify config_key matches</td></tr><tr><td>Config completeness</td><td>Verify required config items</td></tr></tbody></table>`,25)])])}const c=n(l,[["render",d]]),r=JSON.parse('{"path":"/en/dev_guide/backend/registration-guide/","title":"Registration Guide","lang":"en-US","frontmatter":{"title":"Registration Guide","createTime":"2025/02/04 10:00:00","icon":"mdi:book-open-page-variant","permalink":"/en/dev_guide/backend/registration-guide/"},"readingTime":{"minutes":1.32,"words":397},"git":{"createdTime":1771412819000,"updatedTime":1771412819000,"contributors":[{"name":"callanwu","username":"callanwu","email":"wujialongml@gmail.com","commits":1,"avatar":"https://avatars.githubusercontent.com/callanwu?v=4","url":"https://github.com/callanwu"},{"name":"Claude Opus 4.6","username":"","email":"noreply@anthropic.com","commits":1,"avatar":"https://gravatar.com/avatar/cd29c5ac348a026a3ec5286890908fffb5bf6ab77f20672171be323a70c95026?d=retro"}]},"filePathRelative":"en/notes/dev_guide/backend/registration_guide.md","headers":[]}');export{c as comp,r as data};
